webpackJsonp([7],{d1Q5:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("Dd8w"),e=i.n(a),n=i("NYxO"),c=i("Du/2"),r=i("hGVa"),o=i("H868"),l=i("4JHP"),u=i("woOf"),h=i.n(u),d=i("WlK5"),m=i("T452");var v=i("9cIF"),f=i("W7Ek"),g=i("58pB"),p=i("A6Hu"),y={name:"search",data:function(){return{loading:!1,hotKeys:[],singer:{},album:{},songs:[],w:""}},methods:e()({_initMusicIco:function(){this.musicIcos=[],this.musicIcos.push(this.$refs.musicIco1),this.musicIcos.push(this.$refs.musicIco2),this.musicIcos.push(this.$refs.musicIco3),this.musicIcos.forEach(function(t){t.run=!1;var s=Object(l.a)(t);t.addEventListener(s,function(){this.style.display="none",this.style.webkitTransform="translate3d(0, 0, 0)",this.style.transform="translate3d(0, 0, 0)",this.run=!1;var t=this.querySelector("div");t.style.webkitTransform="translate3d(0, 0, 0)",t.style.transform="translate3d(0, 0, 0)"},!1)})},_startMusicIcoAnimation:function(t){var s=this,i=t.clientX,a=t.clientY;if(this.musicIcos.length>0)for(var e=function(t){var e=s.musicIcos[t];if(!1===e.run)return e.style.top=a+"px",e.style.left=i+"px",e.style.display="inline-block",setTimeout(function(){e.run=!0,e.style.webkitTransform="translate3d(0, 1000px, 0)",e.style.transform="translate3d(0, 1000px, 0)";var t=e.querySelector("div");t.style.webkitTransform="translate3d(-30px, 0, 0)",t.style.transform="translate3d(-30px, 0, 0)"},10),"break"},n=0;n<this.musicIcos.length;n++){if("break"===e(n))break}},search:function(t){var s=this;this.w=t,this.singer=[],this.album={},this.songs=[],this.loading=!0,function(t){var s=h()({},m.c,{g_tk:5381,platform:"h5",needNewCode:0,catZhida:1,cr:1,t:0,flag_qc:0,aggr:0,n:20,p:1,w:t,remoteplace:"txt.yqq.song",_:(new Date).getTime()});return Object(d.a)(m.d.search,s,m.b)}(t).then(function(t){if(t&&t.code===m.a){var i=t.data.zhida,a={},e={};switch(i.type){case 0:break;case 1:var n=i.zhida_singer;(a=f.c(n)).songNum=n.songNum,a.albumNum=n.albumNum;break;case 2:var c=i.zhida_album;e=g.c(c)}var r=[];t.data.song.list.forEach(function(t){1!==t.pay.payplay&&r.push(p.b(t))}),s.album=e,s.singer=a,s.songs=r,s.loading=!1}})},handleSearch:function(t){this.search(t)},handleKeyDown:function(t){this.album={},this.singer={},this.songs=[],13===t.keyCode&&this.search(t.currentTarget.value)},handleClick:function(t,s,i){var a=this;switch(s){case"album":this.$router.push({path:this.$route.path+"/album/"+t});break;case"singer":this.$router.push({path:this.$route.path+"/singer/"+t});break;case"song":this._startMusicIcoAnimation(i),Object(v.a)(t.mId).then(function(s){if(s&&s.code===m.a&&s.data.items){var i=s.data.items[0];t.url="http://dl.stream.qqmusic.qq.com/"+i.filename+"?vkey="+i.vkey+"&guid=3655047200&fromtag=66",a.setSongs([t]),a.changeCurrentSong(t)}})}}},Object(n.b)({changeCurrentSong:c.a,setSongs:c.d})),computed:{cancelButtonStyle:function(){return{display:this.w?"block":"none"}},searchHotStyle:function(){return{display:this.w?"none":"block"}},albumStyle:function(){return{display:this.album.id?"block":"none"}},singerStyle:function(){return{display:this.singer.id?"block":"none"}}},created:function(){var t,s=this;(t=h()({},m.c,{g_tk:5381,uin:0,platform:"h5",needNewCode:1,notice:0,_:(new Date).getTime()}),Object(d.a)(m.d.hotkey,t,m.b)).then(function(t){t&&t.code===m.a&&(s.hotKeys=t.data.hotkey)})},mounted:function(){this._initMusicIco()},components:{Loading:r.a,Scroll:o.a}},_={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"music-search skin-search"},[i("div",{staticClass:"search-box-wrapper skin-search-box-wrapper"},[i("div",{staticClass:"search-box skin-search-box"},[i("i",{staticClass:"icon-search"}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.w,expression:"w"}],staticClass:"search-input",attrs:{type:"text",placeholder:"搜索歌曲、歌手、专辑"},domProps:{value:t.w},on:{keydown:t.handleKeyDown,input:function(s){s.target.composing||(t.w=s.target.value)}}})]),t._v(" "),i("div",{staticClass:"cancel-button",style:t.cancelButtonStyle,on:{click:function(s){t.w=""}}},[t._v("取消")])]),t._v(" "),i("div",{staticClass:"search-hot",style:t.searchHotStyle},[i("h1",{staticClass:"title"},[t._v("热门搜索")]),t._v(" "),i("div",{staticClass:"hot-list"},[t._l(t.hotKeys,function(s,a){return[a<=10?i("div",{key:s.index,staticClass:"hot-item",on:{click:function(i){t.handleSearch(s.k)}}},[t._v(t._s(s.k))]):t._e()]})],2)]),t._v(" "),i("div",{staticClass:"search-result skin-search-result",style:t.cancelButtonStyle},[i("scroll",[i("div",{staticClass:"result-container"},[i("div",{staticClass:"album-wrapper",style:t.albumStyle,on:{click:function(s){t.handleClick(t.album.mId,"album",s)}}},[i("div",{staticClass:"left"},[i("img",{attrs:{src:t.album.img,alt:t.album.name}})]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"song"},[t._v(t._s(t.album.name))]),t._v(" "),i("div",{staticClass:"singer"},[t._v(t._s(t.album.singer))])])]),t._v(" "),i("div",{staticClass:"singer-wrapper",style:t.singerStyle,on:{click:function(s){t.handleClick(t.singer.mId,"singer",s)}}},[i("div",{staticClass:"left"},[i("img",{attrs:{src:t.singer.img,alt:t.singer.name}})]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"singer"},[t._v(t._s(t.singer.name))]),t._v(" "),i("div",{staticClass:"info"},[t._v("单曲"+t._s(t.singer.songNum)+" 专辑"+t._s(t.singer.albumNum))])])]),t._v(" "),t._l(t.songs,function(s){return i("div",{key:s.id,staticClass:"song-wrapper",on:{click:function(i){t.handleClick(s,"song",i)}}},[i("div",{staticClass:"left"},[i("i",{staticClass:"icon-fe-music"})]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"song"},[t._v(t._s(s.name))]),t._v(" "),i("div",{staticClass:"singer"},[t._v(t._s(s.singer))])])])})],2),t._v(" "),i("loading",{attrs:{title:"正在加载...",show:t.loading}})],1)],1),t._v(" "),i("div",{ref:"musicIco1",staticClass:"music-ico"},[i("div",{staticClass:"icon-fe-music"})]),t._v(" "),i("div",{ref:"musicIco2",staticClass:"music-ico"},[i("div",{staticClass:"icon-fe-music"})]),t._v(" "),i("div",{ref:"musicIco3",staticClass:"music-ico"},[i("div",{staticClass:"icon-fe-music"})]),t._v(" "),i("transition",{attrs:{name:"translate"}},[i("router-view")],1)],1)},staticRenderFns:[]};var b=i("VU/8")(y,_,!1,function(t){i("oKYk")},"data-v-3f04f369",null);s.default=b.exports},oKYk:function(t,s){}});
//# sourceMappingURL=7.349e314f2eb52b47e001.js.map