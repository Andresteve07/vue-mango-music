{"version":3,"sources":["webpack:///./src/models/ranking.js","webpack:///./src/api/ranking.js","webpack:///src/views/ranking/Ranking.vue","webpack:///./src/views/ranking/Ranking.vue?7861","webpack:///./src/views/ranking/Ranking.vue"],"names":["data","songList","forEach","item","push","SongModel","songname","singername","Ranking","id","topTitle","picUrl","topID","ListName","pic_album","title","img","songs","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","this","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","PARAM","g_tk","uin","platform","needNewCode","_","Date","getTime","jsonp","URL","rankingList","OPTION","topId","tpl","page","type","topid","rankingInfo","name","loading","loadingImg","__webpack_require__","created","_this","Object","ranking","then","res","code","config","topList","test","models_ranking","methods","toDetail","$router","$route","path","components","Loading","Scroll","ranking_Ranking","render","_vm","_h","$createElement","_c","_self","staticClass","style","display","_l","key","on","click","$event","directives","rawName","value","src","expression","attrs","alt","_v","_s","song","index","singer","show","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/4.28a25b00af7729998db8.js","sourcesContent":["import * as SongModel from \"./song\"\r\n/**\r\n * 排行榜类模型\r\n */\r\nexport class Ranking {\r\n  constructor(id, title, img, songs) {\r\n    this.id = id;\r\n    this.title = title;\r\n    this.img = img;\r\n    this.songs = songs;\r\n  }\r\n}\r\n\r\n/*\r\n * 通过排行榜列表创建排行榜对象函数\r\n */\r\nexport function createRankingByList(data) {\r\n  const songList = [];\r\n  data.songList.forEach(item => {\r\n    songList.push(new SongModel.Song(0, \"\", item.songname, \"\", 0, \"\", item.singername));\r\n  });\r\n  return new Ranking(\r\n    data.id,\r\n    data.topTitle,\r\n    data.picUrl,\r\n    songList\r\n  );\r\n}\r\n\r\n/*\r\n * 通过排行榜详情创建排行榜对象函数\r\n */\r\nexport function createRankingByDetail(data) {\r\n  return new Ranking(\r\n    data.topID,\r\n    data.ListName,\r\n    data.pic_album,\r\n    []\r\n  );\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/ranking.js","import jsonp from \"./jsonp\"\r\nimport { URL, PARAM, OPTION } from \"./config\"\r\n\r\nexport function getRankingList() {\r\n  const data = Object.assign({}, PARAM, {\r\n    g_tk: 5381,\r\n    uin: 0,\r\n    platform: \"h5\",\r\n    needNewCode: 1,\r\n    _: new Date().getTime()\r\n  });\r\n  return jsonp(URL.rankingList, data, OPTION);\r\n}\r\n\r\nexport function getRankingInfo(topId) {\r\n  const data = Object.assign({}, PARAM, {\r\n    g_tk: 5381,\r\n    uin: 0,\r\n    platform: \"h5\",\r\n    needNewCode: 1,\r\n    tpl: 3,\r\n    page: \"detail\",\r\n    type: \"top\",\r\n    topid: topId,\r\n    _: new Date().getTime()\r\n  });\r\n  return jsonp(URL.rankingInfo, data, OPTION);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/ranking.js","<template>\r\n  <div class=\"music-ranking\">\r\n    <scroll>\r\n      <div class=\"ranking-list\" :style=\"{display: this.loading === true ? 'none' : ''}\">\r\n        <div class=\"ranking-wrapper skin-ranking-wrapper\" v-for=\"ranking in rankingList\" :key=\"ranking.id\" @click=\"toDetail(ranking.id)\">\r\n          <div class=\"left\">\r\n              <img v-lazy=\"{src: ranking.img, loading: loadingImg}\" :alt=\"ranking.title\" />\r\n          </div>\r\n          <div class=\"right\">\r\n            <h1 class=\"ranking-title\">\r\n              {{ranking.title}}\r\n            </h1>\r\n            <div class=\"top-song\" v-for=\"(song, index) in ranking.songs\" :key=\"index\">\r\n              <span class=\"index\">{{index + 1}}</span>\r\n              <span>{{song.name}}</span>\r\n              &nbsp;-&nbsp;\r\n              <span class=\"singer\">{{song.singer}}</span>\r\n            </div>\r\n            <i class=\"arrow\"></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </scroll>\r\n    <loading title=\"正在加载...\" :show=\"loading\"/>\r\n    <transition name=\"translate\">\r\n      <router-view />\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Loading from \"@/components/loading/Loading\"\r\n  import Scroll from \"@/components/Scroll\"\r\n  import { getRankingList } from \"@/api/ranking\"\r\n  import { CODE_SUCCESS } from \"@/api/config\"\r\n  import * as RankingModel from \"@/models/ranking\"\r\n\r\n  export default {\r\n    name: \"ranking\",\r\n    data() {\r\n      return {\r\n        loading: true,\r\n        rankingList: [],\r\n        loadingImg: require(\"../../assets/imgs/music.png\")\r\n      };\r\n    },\r\n    created() {\r\n      getRankingList().then((res) => {\r\n        // console.log(\"获取排行榜：\");\r\n        if (res) {\r\n          // console.log(res);\r\n          if (res.code === CODE_SUCCESS) {\r\n            let topList = [];\r\n            res.data.topList.forEach(item => {\r\n              if (/MV/i.test(item.topTitle)) {\r\n                return;\r\n              }\r\n              topList.push(RankingModel.createRankingByList(item));\r\n            });\r\n            this.rankingList = topList;\r\n            this.loading = false;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    methods: {\r\n      toDetail(id) {\r\n        // 跳转到排行榜详情\r\n        this.$router.push(`${this.$route.path + '/' + id}`);\r\n      }\r\n    },\r\n    components: {\r\n      Loading,\r\n      Scroll\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  .music-ranking\r\n    width: 100%\r\n    height: 100%\r\n    .ranking-list\r\n      padding-bottom: 15px\r\n      .ranking-wrapper\r\n        display: flex\r\n        margin: 15px\r\n        /*background-color: #FFFFFF*/\r\n        .left\r\n          flex: 0 0 100px\r\n          width: w = 100px\r\n          height: h = @width\r\n          img\r\n            width: w\r\n            height: h\r\n        .right\r\n          flex: 1\r\n          line-height: 22px\r\n          font-size: 14px\r\n          padding: 0 10px\r\n          overflow: hidden\r\n          position: relative\r\n          .ranking-title\r\n            font-size: 16px\r\n            margin: 4px 0 6px 0\r\n          .top-song, .ranking-title\r\n            overflow: hidden\r\n            text-overflow: ellipsis\r\n            white-space: nowrap\r\n            .index\r\n              margin-right: 6px\r\n            /*.singer\r\n              color: rgba(0, 0, 0, 0.5)*/\r\n          .arrow\r\n            position: absolute\r\n            top: 50%\r\n            right: 10px\r\n            width: 6px\r\n            height: @width\r\n            margin-top: -3px\r\n            border-right: 1px solid #B2B2B2\r\n            border-bottom: 1px solid #B2B2B2\r\n            transform: rotate(-45deg)\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/ranking/Ranking.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-ranking\"},[_c('scroll',[_c('div',{staticClass:\"ranking-list\",style:({display: this.loading === true ? 'none' : ''})},_vm._l((_vm.rankingList),function(ranking){return _c('div',{key:ranking.id,staticClass:\"ranking-wrapper skin-ranking-wrapper\",on:{\"click\":function($event){_vm.toDetail(ranking.id)}}},[_c('div',{staticClass:\"left\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:({src: ranking.img, loading: _vm.loadingImg}),expression:\"{src: ranking.img, loading: loadingImg}\"}],attrs:{\"alt\":ranking.title}})]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('h1',{staticClass:\"ranking-title\"},[_vm._v(\"\\n            \"+_vm._s(ranking.title)+\"\\n          \")]),_vm._v(\" \"),_vm._l((ranking.songs),function(song,index){return _c('div',{key:index,staticClass:\"top-song\"},[_c('span',{staticClass:\"index\"},[_vm._v(_vm._s(index + 1))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(song.name))]),_vm._v(\"\\n             - \\n            \"),_c('span',{staticClass:\"singer\"},[_vm._v(_vm._s(song.singer))])])}),_vm._v(\" \"),_c('i',{staticClass:\"arrow\"})],2)])}))]),_vm._v(\" \"),_c('loading',{attrs:{\"title\":\"正在加载...\",\"show\":_vm.loading}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"translate\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c11849d2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/ranking/Ranking.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c11849d2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Ranking.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Ranking.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c11849d2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Ranking.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c11849d2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/ranking/Ranking.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}